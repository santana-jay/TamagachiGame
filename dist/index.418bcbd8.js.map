{"mappings":"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","sources":["<anon>","src/init.js","src/gameState.js","src/constants.js","src/ui.js","src/buttons.js"],"sourcesContent":["const $d31e157fce8f2b46$export$254fa44e74c824df = 3000;\nconst $d31e157fce8f2b46$export$fde44257752a9f60 = [\n    \"fish\",\n    \"poop\",\n    \"weather\"\n];\nconst $d31e157fce8f2b46$export$d109769b7b60b20b = 0.3;\nconst $d31e157fce8f2b46$export$d3112996f706f1c = [\n    \"day\",\n    \"rain\",\n    \"night\"\n];\nconst $d31e157fce8f2b46$export$6deaf3182f1c1b32 = 60;\nconst $d31e157fce8f2b46$export$d948a4fe06c2f359 = 4;\nconst $d31e157fce8f2b46$export$57d09a4d1c60d13c = (clock)=>Math.floor(Math.random() * 3) + 5 + clock;\nconst $d31e157fce8f2b46$export$90ecfaab96696ff = (clock)=>Math.floor(Math.random() * 2) + 3 + clock;\nconst $d31e157fce8f2b46$export$c0dfc64653b730bf = (clock)=>Math.floor(Math.random() * 3) + 4 + clock;\n\n\nconst $c5609b19b69769b8$export$31edf49e44578506 = function modFox(state) {\n    document.querySelector(\".fox\").className = `fox fox-${state}`;\n};\nconst $c5609b19b69769b8$export$1f9518c2c59b8e99 = function modScene(state) {\n    document.querySelector(\".game\").className = `game ${state}`;\n};\nfunction $c5609b19b69769b8$export$7ee9422b060e0e7b(show) {\n    document.querySelector(\".poop-bag\").classList.toggle(\"hidden\", !show);\n}\nfunction $c5609b19b69769b8$export$cd949469e93f219e(text = \"\") {\n    document.querySelector(\".modal\").innerHTML = `<div class=\"modal-inner\">${text}</div>`;\n}\n // functions above both work the same way\n\n\nconst $59d00dbc1d5a03bd$var$gameState = {\n    current: \"INIT\",\n    clock: 1,\n    wakeTime: -1,\n    sleepTime: -1,\n    hungryTime: -1,\n    dieTime: -1,\n    timeToStartCelebrating: -1,\n    timeToStopCelebrating: -1,\n    poopTime: -1,\n    tick () {\n        this.clock++;\n        // console.error('clock', this.clock);\n        if (this.clock === this.wakeTime) this.wake();\n        else if (this.clock === this.sleepTime) this.sleep();\n        else if (this.clock === this.hungryTime) this.getHungry();\n        else if (this.clock === this.dieTime) this.die();\n        else if (this.clock === this.timeToStartCelebrating) this.startCelebrating();\n        else if (this.clock === this.timeToStopCelebrating) this.endCelebrating();\n        else if (this.clock === this.poopTime) this.poop();\n        return this.clock;\n    },\n    startGame () {\n        this.current = \"HATCHING\";\n        this.wakeTime = this.clock + 3;\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"egg\");\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)(\"day\");\n        (0, $c5609b19b69769b8$export$cd949469e93f219e)();\n    },\n    wake () {\n        this.current = \"IDLING\";\n        this.wakeTime = -1;\n        this.scene = Math.random() > (0, $d31e157fce8f2b46$export$d109769b7b60b20b) ? 0 : 1;\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)((0, $d31e157fce8f2b46$export$d3112996f706f1c)[this.scene]);\n        this.sleepTime = this.clock + (0, $d31e157fce8f2b46$export$6deaf3182f1c1b32);\n        this.hungryTime = (0, $d31e157fce8f2b46$export$57d09a4d1c60d13c)(this.clock);\n        this.determineFoxState();\n        (0, $c5609b19b69769b8$export$cd949469e93f219e)(\"I'M ALIVE!\");\n        setTimeout((0, $c5609b19b69769b8$export$cd949469e93f219e), 3000);\n    },\n    sleep () {\n        this.state = \"SLEEP\";\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"sleep\");\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)(\"night\");\n        this.clearTimes();\n        this.wakeTime = this.clock + (0, $d31e157fce8f2b46$export$d948a4fe06c2f359);\n    },\n    clearTimes () {\n        this.clock = -1;\n        this.wakeTime = -1;\n        this.sleepTime = -1;\n        this.hungryTime = -1;\n        this.dieTime = -1;\n        this.timeToStartCelebrating = -1;\n        this.timeToStopCelebrating = -1;\n        this.poopTime = -1;\n    },\n    getHungry () {\n        this.current = \"HUNGRY\";\n        this.dieTime = (0, $d31e157fce8f2b46$export$90ecfaab96696ff)(this.clock);\n        this.hungryTime = -1;\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"hungry\");\n        (0, $c5609b19b69769b8$export$cd949469e93f219e)(\"I'm Hungry Emery. Can I have some food please?\");\n    },\n    die () {\n        this.current = \"DEAD\", (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)(\"dead\");\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"dead\");\n        this.clearTimes();\n        (0, $c5609b19b69769b8$export$cd949469e93f219e)(`Oh no Emery!! The fox died :,( <br/> Press the middle button to start a new game.`);\n    },\n    startCelebrating () {\n        (0, $c5609b19b69769b8$export$cd949469e93f219e)();\n        this.current = \"CELEBRATING\";\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"celebrate\");\n        this.timeToStartCelebrating = -1;\n        this.timeToStopCelebrating = this.clock + 2;\n    },\n    endCelebrating () {\n        this.timeToStopCelebrating = -1;\n        this.current = \"IDLING\";\n        this.determineFoxState();\n        (0, $c5609b19b69769b8$export$7ee9422b060e0e7b)(false);\n    },\n    determineFoxState () {\n        if (this.current === \"IDLING\") {\n            if ((0, $d31e157fce8f2b46$export$d3112996f706f1c)[this.scene] === \"rain\") (0, $c5609b19b69769b8$export$31edf49e44578506)(\"rain\");\n            else (0, $c5609b19b69769b8$export$31edf49e44578506)(\"idling\");\n        }\n    },\n    poop () {\n        this.current = \"POOP\";\n        this.poopTime = -1;\n        this.dieTime = (0, $d31e157fce8f2b46$export$90ecfaab96696ff)(this.clock);\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"pooping\");\n    },\n    handleUserAction (icon) {\n        if ([\n            \"SLEEP\",\n            \"FEEDING\",\n            \"CELEBRATING\",\n            \"HATCHING\"\n        ].includes(this.current)) // do nothing\n        return;\n        if (this.current === \"INIT\" || this.current === \"DEAD\") {\n            this.startGame();\n            return;\n        }\n        switch(icon){\n            case \"weather\":\n                this.changeWeather();\n                break;\n            case \"poop\":\n                this.cleanUpPoop();\n                break;\n            case \"fish\":\n                this.feed();\n                break;\n        }\n    },\n    changeWeather () {\n        this.scene = (this.scene + 1) % (0, $d31e157fce8f2b46$export$d3112996f706f1c).length;\n        (0, $c5609b19b69769b8$export$1f9518c2c59b8e99)((0, $d31e157fce8f2b46$export$d3112996f706f1c)[this.scene]);\n        this.determineFoxState();\n    },\n    cleanUpPoop () {\n        this.current;\n        this.dieTime = -1;\n        (0, $c5609b19b69769b8$export$7ee9422b060e0e7b)(true);\n        this.startCelebrating();\n        this.hungryTime = (0, $d31e157fce8f2b46$export$57d09a4d1c60d13c)(this.clock);\n    },\n    feed () {\n        if (this.current !== \"HUNGRY\") return;\n        this.current = \"FEEDING\";\n        this.dieTime = -1;\n        this.poopTime = (0, $d31e157fce8f2b46$export$c0dfc64653b730bf)(this.clock);\n        (0, $c5609b19b69769b8$export$31edf49e44578506)(\"eating\");\n        this.timeToStartCelebrating = this.clock + 2;\n    }\n};\nconst $59d00dbc1d5a03bd$export$ccab573699251c80 = $59d00dbc1d5a03bd$var$gameState.handleUserAction.bind($59d00dbc1d5a03bd$var$gameState);\nvar $59d00dbc1d5a03bd$export$2e2bcd8739ae039 = $59d00dbc1d5a03bd$var$gameState;\n\n\n\nconst $f99f8bc8eb4b45b2$var$toggleHighlighted = (icon, show)=>{\n    document.querySelector(`.${(0, $d31e157fce8f2b46$export$fde44257752a9f60)[icon]}-icon`).classList.toggle(\"highlighted\", show);\n};\nfunction $f99f8bc8eb4b45b2$export$2e2bcd8739ae039(handleUserAction) {\n    let selectedIcon = 0;\n    function buttonClick({ target: target }) {\n        if (target.classList.contains(\"left-btn\")) {\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, false);\n            selectedIcon = (2 + selectedIcon) % (0, $d31e157fce8f2b46$export$fde44257752a9f60).length;\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, true);\n        } else if (target.classList.contains(\"right-btn\")) {\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, false);\n            selectedIcon = (1 + selectedIcon) % (0, $d31e157fce8f2b46$export$fde44257752a9f60).length;\n            $f99f8bc8eb4b45b2$var$toggleHighlighted(selectedIcon, true);\n        } else handleUserAction((0, $d31e157fce8f2b46$export$fde44257752a9f60)[selectedIcon]);\n    }\n    document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n\n\n\nasync function $dbe606d024410119$var$init() {\n    console.log(\"starting game\");\n    (0, $f99f8bc8eb4b45b2$export$2e2bcd8739ae039)((0, $59d00dbc1d5a03bd$export$ccab573699251c80));\n    let nextTimeToTick = Date.now();\n    function nextAnimationFrame() {\n        const now = Date.now();\n        if (nextTimeToTick <= now) {\n            (0, $59d00dbc1d5a03bd$export$2e2bcd8739ae039).tick();\n            nextTimeToTick = now + (0, $d31e157fce8f2b46$export$254fa44e74c824df);\n        }\n        requestAnimationFrame(nextAnimationFrame);\n    }\n    nextAnimationFrame();\n}\n$dbe606d024410119$var$init();\n\n\n//# sourceMappingURL=index.418bcbd8.js.map\n","import gameState, { handleUserAction } from \"./gameState\";\nimport initButtons from \"./buttons\";\nimport { TICK_RATE } from \"./constants\";\n\nasync function init() {\n  console.log(\"starting game\");\n  initButtons(handleUserAction);\n\n  let nextTimeToTick = Date.now();\n  function nextAnimationFrame() {\n    const now = Date.now();\n    if (nextTimeToTick <= now) {\n      gameState.tick();\n      nextTimeToTick = now + TICK_RATE;\n    }\n    requestAnimationFrame(nextAnimationFrame);\n  }\n\n  nextAnimationFrame();\n}\n\ninit();\n","import { DAY_LENGTH, NIGHT_LENGTH, RAIN_CHANCE, SCENES, getNextDieTime, getNextHungerTime, getNextPoopTime } from \"./constants\";\nimport { modFox, modScene, togglePoopBag, writeModal } from \"./ui\";\n\n\nconst gameState = {\n  current: \"INIT\",\n  clock: 1,\n  wakeTime: -1,\n  sleepTime: -1,\n  hungryTime: -1,\n  dieTime: -1,\n  timeToStartCelebrating: -1,\n  timeToStopCelebrating: -1,\n  poopTime: -1,\n  tick(){\n    this.clock++;\n    // console.error('clock', this.clock);\n\n    if (this.clock === this.wakeTime) {\n      this.wake();\n    }\n    else if (this.clock === this.sleepTime) {\n      this.sleep();\n    }\n    else if (this.clock === this.hungryTime) {\n      this.getHungry();\n    }\n    else if (this.clock === this.dieTime) {\n      this.die();\n    }\n    else if (this.clock === this.timeToStartCelebrating) {\n      this.startCelebrating();\n    }\n    else if (this.clock === this.timeToStopCelebrating) {\n      this.endCelebrating();\n    }\n    else if (this.clock === this.poopTime) {\n      this.poop();\n    }\n\n    return this.clock;\n  },\n\n  startGame(){\n    this.current = 'HATCHING';\n    this.wakeTime = this.clock + 3;\n    modFox('egg');\n    modScene('day');\n    writeModal();\n  },\n\n  wake() {\n    this.current = 'IDLING';\n    this.wakeTime = -1;\n    this.scene = Math.random() > RAIN_CHANCE ? 0 : 1;\n    modScene(SCENES[this.scene]);\n    this.sleepTime = this.clock + DAY_LENGTH;\n    this.hungryTime = getNextHungerTime(this.clock);\n    this.determineFoxState();\n    writeModal(\"I'M ALIVE!\");\n    setTimeout(writeModal, 3000);\n  },\n\n  sleep() {\n    this.state = \"SLEEP\";\n    modFox('sleep');\n    modScene('night');\n    this.clearTimes();\n    this.wakeTime = this.clock + NIGHT_LENGTH;\n  },\n\n  clearTimes() {\n  this.clock = -1\n  this.wakeTime = -1\n  this.sleepTime = -1\n  this.hungryTime = -1\n  this.dieTime = -1\n  this.timeToStartCelebrating = -1\n  this.timeToStopCelebrating = -1\n  this.poopTime = -1\n  },\n\n  getHungry() {\n    this.current = 'HUNGRY';\n    this.dieTime = getNextDieTime(this.clock);\n    this.hungryTime = -1;\n    modFox('hungry');\n    writeModal(\"I'm Hungry Emery. Can I have some food please?\")\n  },\n\n  die() {\n    this.current = 'DEAD',\n    modScene('dead');\n    modFox('dead');\n    this.clearTimes();\n    writeModal(`Oh no Emery!! The fox died :,( <br/> Press the middle button to start a new game.`)\n  },\n\n  startCelebrating() {\n    writeModal();\n    this.current = 'CELEBRATING';\n    modFox('celebrate');\n    this.timeToStartCelebrating = -1;\n    this.timeToStopCelebrating = this.clock + 2;\n  },\n\n  endCelebrating() {\n    this.timeToStopCelebrating = -1;\n    this.current = 'IDLING';\n    this.determineFoxState();\n    togglePoopBag(false);\n  },\n\n  determineFoxState() {\n    if (this.current === 'IDLING') {\n      if (SCENES[this.scene] === 'rain') {\n        modFox('rain');\n      }\n      else {\n        modFox('idling')\n      }\n    }\n  },\n\n  poop() {\n    this.current = 'POOP';\n    this.poopTime = -1;\n    this.dieTime = getNextDieTime(this.clock);\n    modFox('pooping');\n  },\n\n  handleUserAction(icon) {\n    if(\n      [\"SLEEP\", \"FEEDING\", \"CELEBRATING\", \"HATCHING\"].includes(this.current)\n    ) {\n      // do nothing\n      return;\n    }\n\n    if(this.current === 'INIT' || this.current === 'DEAD') {\n      this.startGame();\n      return;\n    }\n\n    switch(icon){\n      case 'weather':\n        this.changeWeather();\n        break;\n      case 'poop':\n        this.cleanUpPoop()\n        break;\n      case 'fish':\n        this.feed();\n        break;\n    }\n  },\n  changeWeather() {\n    this.scene = (this.scene + 1) % SCENES.length;\n    modScene(SCENES[this.scene]);\n    this.determineFoxState();\n  },\n\n  cleanUpPoop() {\n    if (!this.current === 'POOPING') {\n\n      return;\n    }\n\n    this.dieTime = -1;\n    togglePoopBag(true);\n    this.startCelebrating();\n    this.hungryTime = getNextHungerTime(this.clock);\n  },\n\n  feed() {\n    if (this.current !== 'HUNGRY') {\n      return;\n    }\n    this.current = 'FEEDING';\n    this.dieTime = -1;\n    this.poopTime = getNextPoopTime(this.clock);\n    modFox('eating');\n    this.timeToStartCelebrating = this.clock + 2;\n  },\n};\n\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\nexport default gameState;\n","export const TICK_RATE = 3000;\nexport const ICONS = ['fish', 'poop', 'weather'];\nexport const RAIN_CHANCE = 0.3;\nexport const SCENES = ['day', 'rain', 'night'];\nexport const DAY_LENGTH = 60;\nexport const NIGHT_LENGTH = 4;\n\nexport const getNextHungerTime = clock => Math.floor(Math.random() * 3) + 5 + clock;\nexport const getNextDieTime = clock => Math.floor(Math.random() * 2) + 3 + clock;\nexport const getNextPoopTime = clock => Math.floor(Math.random() * 3) + 4 + clock;\n","export const modFox = function modFox(state) {\n  document.querySelector('.fox').className = `fox fox-${state}`;\n}\n\nexport const modScene = function modScene(state) {\n  document.querySelector('.game').className = `game ${state}`;\n}\n\nexport function togglePoopBag(show) {\n  document.querySelector('.poop-bag').classList.toggle('hidden', !show);\n}\n\nexport function writeModal(text = '') {\n  document.querySelector('.modal').innerHTML = `<div class=\"modal-inner\">${text}</div>`\n};\n\n// functions above both work the same way\n","import { ICONS } from \"./constants\";\n\nconst toggleHighlighted = (icon, show) => {\n  document.querySelector(\n    `.${ICONS[icon]}-icon`\n  ).classList.toggle('highlighted', show);\n}\n\n\nexport default function initButtons(handleUserAction) {\n  let selectedIcon = 0;\n\n  function buttonClick ({ target }) {\n    if (target.classList.contains('left-btn')) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (2 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    }\n    else if (target.classList.contains('right-btn')) {\n      toggleHighlighted(selectedIcon, false);\n      selectedIcon = (1 + selectedIcon) % ICONS.length;\n      toggleHighlighted(selectedIcon, true);\n    }\n    else {\n      handleUserAction(ICONS[selectedIcon]);\n    }\n  }\n\n  document.querySelector('.buttons').addEventListener('click', buttonClick);\n}\n"],"names":["$d31e157fce8f2b46$export$fde44257752a9f60","$d31e157fce8f2b46$export$d3112996f706f1c","$d31e157fce8f2b46$export$57d09a4d1c60d13c","clock","Math","floor","random","$d31e157fce8f2b46$export$90ecfaab96696ff","$d31e157fce8f2b46$export$c0dfc64653b730bf","$c5609b19b69769b8$export$31edf49e44578506","state","document","querySelector","className","$c5609b19b69769b8$export$1f9518c2c59b8e99","$c5609b19b69769b8$export$7ee9422b060e0e7b","show","classList","toggle","$c5609b19b69769b8$export$cd949469e93f219e","text","innerHTML","$59d00dbc1d5a03bd$var$gameState","current","wakeTime","sleepTime","hungryTime","dieTime","timeToStartCelebrating","timeToStopCelebrating","poopTime","tick","wake","sleep","getHungry","die","startCelebrating","endCelebrating","poop","startGame","scene","determineFoxState","setTimeout","clearTimes","handleUserAction","icon","includes","changeWeather","cleanUpPoop","feed","length","$59d00dbc1d5a03bd$export$ccab573699251c80","bind","$f99f8bc8eb4b45b2$var$toggleHighlighted","$dbe606d024410119$var$init","selectedIcon","console","log","addEventListener","target","contains","nextTimeToTick","Date","now","nextAnimationFrame","requestAnimationFrame"],"version":3,"file":"index.418bcbd8.js.map"}